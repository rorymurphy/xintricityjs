<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>QUnit Example</title>
  <link rel="stylesheet" href="../qunit/qunit.css">
</head>
<body>
  <div id="qunit"></div>
  <div id="qunit-fixture">
      <div id="xin-mvvm-css-trigger-test">
          <div>
              <div class="css-trigger-parent">
                  <code data-xt-event="click" data-xt-class="test-class"></code>
                  <code data-xt-event="click" data-xt-style="display:none; color: black;"></code>
              </div>
          </div>
      </div>
      
      <div id="xin-mvvm-action-trigger-test">
          <div>
              <div class="action-trigger-parent">
                  <code data-xt-event="click" data-xt-action="{{model.Delete}}"></code>
                  <code data-xt-event="click" data-xt-action="{{model.Add}}"></code>
              </div>
          </div>
      </div>
      
      <div id="xin-mvvm-attribute-binding-test">
          <div>
            <input type="text" name="testval" value="{{model.Value}}" />
          </div>
      </div>
      
      <div id="xin-mvvm-text-binding-test">
          <div>
              <p>{{Model.FirstName}} {{Model.LastName}}</p>
          </div>
      </div>
      
      <div id="xin-mvvm-text-binding-attribute-test">
          <div data-value="{{Model.FirstName}} {{Model.LastName}}"></div>
      </div>
      
      <div id="xin-mvvm-select-binding-test">
          <div>
              <select data-xt-options="{{Model.Options}}" data-xt-text-field="some-text-field" data-xt-value-field="some-value-field"></select>
          </div>
      </div>
      
      <div id="xin-mvvm-if-block-test">
          <div>
              <div data-xt-if="{{Model.TruthyValue}}">
                  <div data-value="{{Model.AttrValue}}"></div>
              </div>
              <div data-xt-else-if="{{Model.AnotherTruthyValue}}">
                  <div data-value="{{Model.AttrValue2}}"></div>
              </div>
              <div data-xt-else="true">
                  <div data-xt-if="{{Model.ThirdTruthyValue}}">
                      <input value="{{Model.SomeTextValue}}" />
                  </div>
              </div>
          </div>
      </div>

      <div id="xin-mvvm-foreach-block-test">
          <div data-xt-foreach="{{Model.CollValue}}" data-xt-iterator="item" data-xt-index="idx">
              <div data-value="{{Model.AttrValue}}">
                  <div data-xt-if="{{Model.ThirdTruthyValue}}">
                      <input value="{{Model.SomeTextValue}}" />
                  </div>
              </div>
          </div>
      </div>
      <div id="xin-mvvm-template-test" class="xt-template">
        <h2>This is test #{{model.TestNum}}, running at {{model.getTime}}</h2>
        <p>Lets look at some albums</p>
        <ul data-xt-foreach="{{model.Albums}}" data-xt-iterator="album">
            <li class="{{album.Slug}}" data-name="This is {{album.Slug}} by {{album.Artist}}">
                <h3>{{album.Title}}</h3>
                <h5 data-xt-if="{{album.IsFavorite}}">Marked as Favorite</h5>
                <h5 data-xt-else>This album sucks</h5>
                <div class="songs" style="display:none;">
                    <table>
                        <tbody data-xt-foreach="{{album.Songs}}" data-xt-iterator="song">
                            <tr data-xt-partial="song-template" data-xt-model="{{song}}" ></tr>
                        </tbody>
                    </table>
                </div>
            </li>
        </ul>
        <p>Which was your favorite?</p>
        <select name="favorite" data-xt-options="{{model.Albums}}" data-xt-text-field="Title" data-xt-value-field="Slug"></select>
      </div>

      <script type="text/template-xintricity" id="song-template">
        <tr>
            <td><input type="checkbox" value="{{model.Title}}" /></td>
            <td>{{model.Artist}}</td>
            <td>
                <code data-xt-event="click" data-xt-action="{{model.Play}}"></code>
                <code data-xt-event="click" data-xt-class="clicked" data-xt-style="background-color: yellow;"></code>
                {{model.Title}}
            </td>
        </tr>
      </script>
      
      <div id="xin-mvvm-textnodebinding-test">This is a {{Property1}}<p> success?</p></div>
      
      <!-- Core MVVM Tests -->
      <div id="xin-mvvm-attributebinding-test">
        <input type="text" name="testval" value="initialVal" />
      </div>

      <div id="xin-mvvm-eventtrigger-test">
        <button>This is a trigger
            <code data-xt-type="style-trigger" data-xt-event="click" data-xt-target=":closest('li') > div.trigger" data-xt-toggle="true" data-xt-class="open" data-xt-style="display:block;"></code>
        </button>
        <div class="trigger"></div>
      </div>


      <div id="xin-mvvm-template-test" class="xt-template">
        <h2>This is test #{{model.TestNum}}, running at {{model.getTime}}</h2>
        <p>Lets look at some albums</p>
        <ul data-xt-foreach="{{model.Albums}}" data-xt-iterator="album">
            <li class="{{album.Slug}}">
                <h3>{{album.Title}}</h3>
                <h5 data-xt-if="{{album.IsFavorite}}">Marked as Favorite</h5>
                <h5 data-xt-else>This album sucks</h5>
                <div class="songs" style="display:none;">
                    <table>
                        <tbody data-xt-foreach="{{album.Songs}}" data-xt-iterator="song">
                            <tr data-xt-partial="song-template" data-xt-model="{{song}}" ></tr>
                        </tbody>
                    </table>
                </div>
            </li>
        </ul>
        <p>Which was your favorite?</p>
        <select name="favorite" data-xt-options="{{model.Albums}}" data-xt-text-field="Title" data-xt-value-field="Slug"></select>
      </div>

      <script type="text/template-xintricity" id="song-template">
        <tr>
            <td><input type="checkbox" value="{{model.Title}}" /></td>
            <td>{{model.Artist}}</td>
            <td>
                <code data-xt-event="click" data-xt-action="{{model.Play}}"></code>
                <code data-xt-event="click" data-xt-class="clicked" data-xt-style="background-color: yellow;"></code>
                {{model.Title}}
            </td>
        </tr>
      </script>
      
      <div id="xin-mvvm-radiobinding-test" data-xt-template="xintricity">
          <form>
              <input type="radio" name="radio-group" value="1975" data-xt-value="{{model.Year}}" checked="checked"/>
              <input type="radio" name="radio-group" value="1985"/>
              <input type="radio" name="radio-group" value="1995"/>
              <input type="radio" name="radio-group" value="2005"/>
          </form>
      </div>
  </div>

<!--  <script type="text/javascript" src="external/require.js"></script>-->
  <script type="text/javascript" src="external/jquery-1.8.3.min.js"></script>
  <script type="text/javascript" src="external/underscore.js"></script>
  <script type="text/javascript" src="../src/xin-util.js"></script>
  <script type="text/javascript" src="../src/base.js"></script>
  <script type="text/javascript" src="../src/xin-template-manager.js"></script>
  <script type="text/javascript" src="../src/xin-model.js"></script>
<!--  <script type="text/javascript" src="../src/xin-parser.js"></script>-->
  <script type="text/javascript" src="../src/xin-mvvm.js"></script>
  <script type="text/javascript" src="../qunit/qunit.js"></script>
  <script type="text/javascript" src="xin-tests-data.js"></script>
  <script type="text/javascript" src="xin-tests-models.js"></script>
  <script type="text/javascript" src="xin-parser-tests.js"></script>
  <script type="text/javascript" src="xin-mvvm-tests.js"></script>
</body>
</html>
